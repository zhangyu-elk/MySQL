# 模糊查询

> 模糊查询是一个比较常见的场景，实际产品中基本都是要支持模糊查询的



## 通配符过滤

```shell
select empno, ename, sal from t_emp where ename like 'a%';
```

```shell
+-------+-------+---------+
| empno | ename | sal     |
+-------+-------+---------+
|  7499 | ALLEN | 1600.00 |
|  7876 | ADAMS | 1100.00 |
+-------+-------+---------+
```

`like`即为通配符过滤的关键字



### 百分号(%)通配符

百分号通配符匹配0个或多个字符，可以在任意位置



### 下划线(_)通配符

```shell
select empno, ename, sal from t_emp where ename like 'a_len';
```

```shell
+-------+-------+---------+
| empno | ename | sal     |
+-------+-------+---------+
|  7499 | ALLEN | 1600.00 |
+-------+-------+---------+
```

下划线通配符匹配一个字符



<font color="red">需要注意的是通配符过滤的性能相比普通的会下降非常多</font>

## 正则表达式过滤

> MySQL支持的知识正则表达式的一个很小的子集

```shell
select empno, ename, sal from t_emp where ename regexp 'a.len';
```

```shell
+-------+-------+---------+
| empno | ename | sal     |
+-------+-------+---------+
|  7499 | ALLEN | 1600.00 |
+-------+-------+---------+
```

`regexp`即为正则表达式过滤的关键字，`.`则表示匹配任意一个字符；从这个角度来讲，`regexp`一定程度上和`like`是类似的



### 特殊字符

|        特殊字符         |       作用       |          示例          |
| :---------------------: | :--------------: | :--------------------: |
|           `|`           |        或        | `regexp 'a.len|adams'` |
| `[123]`/`[1-9]`/`[a-z]` | 匹配指定字符之一 |    `regexp '[abc]'`    |
|        `[^123]`         | 排除所有指定字符 |                        |
|          `\\`           |     转义字符     |                        |



### 数字

|       特殊字符       |            作用             | 示例 |
| :------------------: | :-------------------------: | :--: |
|         `*`          |        匹配0个或多个        |      |
|         `+`          |        匹配1个或多个        |      |
|         `?`          |        匹配0个或1个         |      |
| `{n}`/`{n,}`/`{n,m}` | 匹配n个到m个，最大不超过255 |      |



### 定位符

| 特殊字符 |   作用   | 示例 |
| :------: | :------: | :--: |
|   `^`    | 匹配开头 |      |
|   `$`    | 匹配结尾 |      |

